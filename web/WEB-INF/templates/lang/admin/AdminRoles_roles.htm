#gui_start_of_page( "<? templates/sv/AdminRoles_roles.htm/1 ?>" "AdminRoles" "CANCEL_ROLE_ADMIN" "RoleAdmin" "" )

<script>
    var expanded = false;

    function showCheckboxes() {
        var checkboxes = document.getElementById("checkboxes");
        if (!expanded) {
            checkboxes.style.display = "block";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

    function selectedValue() {
        var selectBox = document.getElementById("selectAzureBox");
        var selectedValue = selectBox.options[selectBox.selectedIndex].value;
        var xHttp = new XMLHttpRequest();
        xHttp.open("PUT", `/servlet/AdminRoles?extRoleId=${selectedValue}`, true);
        xHttp.send();

        xHttp.onreadystatechange = function () {
            if (this.status === 200) {
                document.getElementById('checkboxes').innerHTML = "";
                document.getElementById('checkboxes').innerHTML = this.responseText;
            }
        };
    }

    //don't change name function - this uses in the server!
    function enableBtnSave() {
        var selectBox = document.getElementById("selectAzureBox");
        var selectedValue = selectBox.options[selectBox.selectedIndex].value;
        var saveLinkRoleBtn = document.getElementById("linkSaveRoles");
        if (null !== selectedValue) {
            saveLinkRoleBtn.style.display = 'block';
        }
    }
</script>
<form method="post" action="AdminRoles" name="UserInfo">
<table border="0" cellspacing="0" cellpadding="2" width="400">
<tr>
	<td>#gui_heading( "<? templates/sv/AdminRoles_roles.htm/1 ?>" )</td>
</tr>
    <td>
	<table border="0" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td class="imcmsAdmText" nowrap><? templates/sv/AdminRoles_roles.htm/2 ?> &nbsp;</td>
		<td>
		<select name="ROLE_ID" size="10">
			#ROLES_MENU#
		</select></td>

        <td class="imcmsAdmText" nowrap>&nbsp;<? templates/sv/AdminRoles_external_roles.htm/3 ?> &nbsp;</td>
        <td>
            <select name="AZURE_ROLE_ID" size="10" id="selectAzureBox" onchange="selectedValue()">
                #EXTERNAL_ROLES_MENU#
            </select>
        </td>
        <td>
            <div class="multiselect">
                <div class="selectBox" onclick="showCheckboxes()">
                    <select>
                        <option><? templates/sv/AdminRoles_select_roles.htm/1 ?></option>
                    </select>
                    <div class="overSelect"></div>
                </div>
                <div id="checkboxes">
                    #LINKED_ROLES#
                </div>
            </div>
        </td>
        <td><input type="submit" class="imcmsFormBtnSmall" id="linkSaveRoles" name="SAVE_EXTERNAL_TO_LOCAL_ROLE"
                   value="<? templates/sv/change_img.html/2007 ?>"></td>
	</tr>
    </table>
    </td>
<tr>
	<td>#gui_hr( "blue" )</td>
</tr>
<tr>
	<td>
	<input type="submit" class="imcmsFormBtnSmall" name="VIEW_ADD_NEW_ROLE" value="<? templates/sv/AdminRoles_roles.htm/2001 ?>">
	<input type="submit" class="imcmsFormBtnSmall" name="VIEW_RENAME_ROLE" value="<? templates/sv/AdminRoles_roles.htm/2002 ?>">
	<input type="submit" class="imcmsFormBtnSmall" name="VIEW_EDIT_ROLE" value="<? templates/sv/AdminRoles_roles.htm/2003 ?>">
        <input type="submit" class="imcmsFormBtnSmall" name="VIEW_DELETE_ROLE"
               value="<? templates/sv/AdminRoles_roles.htm/2004 ?>">
    </td>
</tr>
</table>
</form>

#gui_end_of_page()


