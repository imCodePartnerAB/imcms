<?xml version="1.0" encoding="iso-8859-1"?>
<changesets>

<changeset version="4.0.0">
    <changes importance="high" for="users">
        <change>
            <p>
                The HTMLArea text field editor was no longer supported and has been replaced with Xinha.
            </p>
            <issue id="4596"/>
        </change>
    </changes>
    <changes importance="high" for="administrators">
        <change>
            <p>
                imCMS now automatically upgrades the database on startup.
                When upgrading from version 3.0 or later, no manual running of SQL scripts is required.
            </p>
            <issue id="206"/>
        </change>
        <change>
            <p>
                The default character encoding has been changed from windows-1252 to UTF-8. 
            </p>
            <issue id="4491"/>
            <issue id="4593"/>
        </change>
    </changes>
    <changes for="users">
        <change>
            <p>
                Fixed a crash when trying to add a link to a document that doesn't exist.
            </p>
            <issue id="4677"/>
        </change>
        <change>
            <p>
                Created new "dual list" user interface for setting document categories.
            </p>
            <issue id="3437"/>
        </change>
        <change>
            <p>
                Created a new user interface for editing menus.
                Menus are now edited on a separate page from the containing text document. 
            </p>
            <issue id="2939"/>
            <issue id="4605"/>
        </change>
        <change>
            <p>
                Menus can now be sorted in order of published datetime.
            </p>
            <issue id="2155"/>
        </change>
        <change>
            <p>
                The "Edit permissions for new documents" was wrongly displayed for non-text documents.
            </p>
            <issue id="4636"/>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                The template administration user interface would crash if demo template directory was missing.
                It will now be created if needed.
            </p>
            <issue id="4724"/>
        </change>
        <change>
            <p>
                Use english language error page if no user language is available.
            </p>
            <issue id="4595"/>
        </change>
        <change>
            <p>
                The maximum length for a category name was changed from 50 characters to 128.
            </p>
            <issue id="4687"/>
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Added API method <method>Image.toHtmlTag()</method> for 
                generating the html tag for an <class>Image</class>. 
            </p>
            <issue id="4712"/>
        </change>
        <change>
            <p>
                Added <attr>title</attr> attribute to <tag>&lt;img&gt;</tag>
                with the same content as the <attr>alt</attr> attribute.
            </p>
            <issue id="4623"/>
        </change>
        <change>
            <p>
                Removed non-XHTML compatible <attr>border</attr> attribute from <tag>&lt;img&gt;</tag>,
                instead passing through <attr>style</attr>, <attr>class</attr>, and <attr>usemap</attr> attributes
                from the <tag>&lt;imcms:image&gt;</tag> in the template.
            </p>
            <issue id="4579"/>
        </change>
        <change>
            <p>
                Line breaks in text fields now generate <tag>"&lt;br /&gt;"</tag> instead of <tag>"&lt;BR&gt;"</tag>,
                providing XHTML compatibility.
            </p>
            <issue id="4581"/>
        </change>
        <change>
            <p>
                <method>UserService.saveUser(User)</method> did not respect the UserAdmin role.
            </p>
            <issue id="4553"/>
        </change>
    </changes>
</changeset>
    
<changeset version="3.2.0">
    <changes for="users">
        <change>
            <p>
                Added "by published datetime" sorting to menus.
            </p>
            <issue id="2155"/>
        </change>
        <change>
            <p>
                Fixed "NullPointerException in FrequencyOrderedBag" crash.
            </p>
            <issue id="4500"/>
        </change>
        <change>
            <p>
                Fixed crash caused by menuitems not being properly removed
                when deleting a document.
            </p>
            <issue id="4498"/>
        </change>
        <change>
            <p>
                Fixed crash caused by documents not being removed from the cache
                when their template was deleted.
            </p>
            <issue id="4800"/>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                Fixed image preview in the file administrator. 
            </p>
            <issue id="4833"/>
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Added capability to send HTML mail.
            </p>
            <issue id="4412"/>
        </change>
        <change>
            <p>
                Mails now use UTF-8 encoding.
            </p>
            <issue id="4412"/>
        </change>
        <change>
            <p>
                Fixed a typo in <localfile>TEMPLATE_SYNTAX.TXT</localfile>.
            </p>
            <issue id="4505"/>
        </change>
        <change>
            <p>
                Fixed a bug preventing users with the UserAdmin role
                from editing users through the API.
            </p>
            <issue id="4553"/>
        </change>
        <change>
            <p>
                Fixed a bug making it impossible to change sort keys for menu items
                through the API.
            </p>
            <issue id="4804"/>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Made the error page output less redundant by only displaying one stack trace.
            </p>
            <issue id="4506"/>
        </change>
    </changes>
</changeset>
    
<changeset version="3.1.2">
    <changes for="users">
        <change>
            <p>
                Fixed bug that made it impossible to create new documents if there was a category-type defined.
            </p>
            <issue id="4380" />
        </change>
        <change>
            <p>
                Made option "linked for unauthorized users" work in searches as well as in menus.
            </p>
            <issue id="4385" />
        </change>
        <change>
            <p>
                Fixed bug that caused template ids not to be cloned when cloning text documents.
                This means that for example changing the template for a newly created text document
                also changes the template of the parent in the cache.
            </p>
            <issue id="4401" />
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Fixed error when running api example "<path>document_search.jsp</path>"
            </p>
            <issue id="4415" />
        </change>
        <change>
            <p>
                Fixed bug that excluded documents without a valid archived datetime from search result.
            </p>
            <issue id="4352" />
        </change>
        <change>
            <p>
                Made the list returned by <method>DocumentService.getDocuments(SearchQuery)</method> modifiable.
            </p>
            <issue id="4386" />
        </change>
        <change>
            <p>
                Fixed bug when trying to sort search result on "meta_headline".
                Added new non-tokenized field "meta_headline_keyword" to use for sorting on
                document headlines.
            </p>
            <issue id="4415" />
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Upgrade imcode-db to version 0.3.
            </p>
            <issue id="4389" />
        </change>
    </changes>
</changeset>

<changeset version="3.1.1">
    <changes for="users">
        <change>
            <p>
                Fixed missing version number in help links.
            </p>
            <issue id="4305" />
        </change>
        <change>
            <p>
                Fixed a bug which prevented sort keys for menuitems from being saved.
            </p>
            <issue id="4313" />
        </change>
    </changes>
</changeset>
    
<changeset version="3.1.0">
    <changes for="users">
        <change>
            <p>
                You can now search in PDF files, as well as in Microsoft Word, Excel, and Powerpoint files. 
            </p>
            <issue id="1855"/>
        </change>
        <change>
            <p>
                Performance has been improved, so searching for documents should be much faster.
            </p>
            <issue id="4135"/>
        </change>
        <change>
            <p>
                Fixed a NullPointerException when browsing search result, for example when searching for images.
            </p>
            <issue id="2926"/>
        </change>
        <change>
            <p>
                Fixed a problem with image filenames containing spaces.
            </p>
            <issue id="4148"/>
        </change>
        <change>
            <p>
                Fixed an exception when entering an invalid text document id for an include.
            </p>
            <issue id="4212"/>
        </change>
        <change>
            <p>
                Fixed a bug where menus would cache their documents,
                so changes to documents would not be visible in menus immediately.
            </p>
            <issue id="4092"/>
        </change>
    </changes>

    <changes for="administrators">
        <change>
            <p>
                You can now search for users by role, title, company, and email address.
            </p>
            <issue id="4140"/>
            <issue id="4142"/>
        </change>
        <change>
            <p>
                Made sure that temporary upload files are removed in a timely manner.
            </p>
            <issue id="4235"/>
        </change>
        <change>
            <p>
                Fixed a bug where a superadmin which was also useradmin couldn't edit all roles for a user.
            </p>
            <issue id="4117"/>
        </change>
        <change>
            <p>
                Fixed a bug where the file manager would fail to change directories if the webapp
                was situated in a symlinked path.
            </p>
            <issue id="4278"/>
        </change>
    </changes>

    <changes for="developers">
        <change>
            <p>
                Documents are now lazily loaded,
                so as to not retrieve more from the database than is needed.
            </p>
            <issue id="4135"/>
        </change>
        <change>
            <p>
                Removed the unused <config>addon</config> property from <path>build.properties.template</path>.
            </p>
            <issue id="4233"/>
        </change>
    </changes>
</changeset>    
    
<changeset version="3.0.1">
    
    <changes for="users">
        <change>
            <p>
                Image-paths are URL-encoded to fix problems with image-paths containing non-ASCII characters.
            </p>
            <issue id="3646"/>
        </change>
        <change>
            <p>
                Users with "restricted 1/2" permissions on a page could not save a text document
                if it linked to documents the user couldn't link to.
            </p>
            <issue id="3773"/>
        </change>
        <change>
            <p>
                Searches on the "phase" field of a document, such as "phase:published" or "phase:new",
                would search based on the time that the document was indexed, not the time of the search.
                Such queries are now rewritten on the fly to fix this.
            </p>
            <issue id="3691"/>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                If there was an error while deploying, the deploy failed completely.
                Now the deploy succeeds, and the error appears in the browser instead.
            </p>
            <issue id="3706"/>
        </change>
        <change>
            <p>
                Fixed a problem with default values in the SQL script for MySQL 5.
            </p>
            <issue id="3643"/>
        </change>
        <change>
            <p>
                Ignore IPv6 and other non IPv4-addresses instead of choking on them.
            </p>
            <issue id="3681"/>
        </change>
        <change>
            <p>
                Added MySQL sample to <path>server.properties</path>.
            </p>
            <issue id="3705"/>
        </change>
        <change>
            <p>
                The upgrade SQL script <path>diff-2-3.sql</path> did not work in some cases,
                due to some foreign keys to the 'users' table changing name.
            </p>
            <issue id="3707"/>
        </change>
        <change>
            <p>
                The imCMS advertisement at the top of every page was not output when the <tag>html</tag> tag contained attributes.
            </p>
            <issue id="3778"/>
        </change>
        <change>
            <p>
                An attempt to reduce ThreadDeath errors with Tomcat has been done,
                by providing only commons-logging-api and calling
                <method>LogFactory.releaseAll()</method> on shutdown.
            </p>
            <issue id="3860"/>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Source is now included for our own libraries.
            </p>
            <issue id="3708"/>
        </change>
        <change>
            <p>
                The ddlutils and commons-betwixt libraries have been updated to newer non-released versions
                from the Apache Subversion repository, so we don't have to keep the ddlutils version patched by us.
            </p>
            <issue id="3914"/>
        </change>
    </changes>
    
</changeset>    
    
<changeset version="3.0.0">
    
    <changes importance="high" for="administrators">
        <change>
            <p>
                Removed deprecated features "conference", "billboard", "chat", "shop", "poll", "qengine", "fortune".
                Warning! If you are using these features, all data for them will be deleted in the upgrade!
            </p>
            <issue id="3347"/>            
        </change>
        <change>
            <p>
                imCMS may now also be run on MySQL.
                In theory it may run on any DBMS which has a JDBC 3.0 compliant driver,
                but this has not been tested.
            </p>
            <issue id="1288"/>
        </change>
        <change>
            <p>
                The setting <config>LdapUserAttribute.CountyCouncil</config> in <path>server.properties</path>
                has been replaced by <config>LdapUserAttribute.Province</config>.
            </p>
            <issue id="3537"/>
        </change>
    </changes>

    <changes importance="high" for="site developers">
        <change>
            <p>
                Many methods no longer throw <class>NoPermissionException</class>,
                notably most accessors of <class>Document</class> and its subclasses.
                Permissions are instead checked when saving the document.
            </p>
            <issue id="2980"/>
        </change>
    </changes>
    
    <changes for="users">
        <change>
            <p>
                The text editor now runs the MS Word-code removal filter every time you paste.
            </p>
        </change>
        <change>
            <p>
                Linking a document for which you had no permissions was impossible
                regardless of whether the document was "linkableByOtherUsers".
            </p>
            <p>
                This has been worked around so that you can add a document by entering its id,
                if a search for that id doesn't match another document.
            </p>
            <issue id="3385"/>
        </change>
        <change>
            <p>
                The reset button in the text editor did not work.                
            </p>
            <issue id="3469"/>
        </change>
        <change>
            <p>
                Removed broken undo/redo support in the text editor until properly supported by upstream.
            </p>
            <issue id="3468"/>
        </change>
        <change>
            <p>
                Integrated jsCalendar (<url>http://www.dynarch.com/projects/calendar/</url>) for selecting datetimes.
            </p>
            <issue id="3442"/>
        </change>
        <change>
            <p>
                If a user with "restricted 1" or "restricted 2" permissions created a document,
                the default "default template" was ignored.
            </p>
            <issue id="3409"/>
        </change>
        <change>
            <p>
                Added a new default tab "Create new" to "My pages",
                which doesn't list documents, but allows creating new documents.
            </p>
            <issue id="2975"/>
        </change>
        <change>
            <p>
                The text editor ctrl-key combinations would ignore the alt-key.
            </p>
            <issue id="3094"/>
        </change>
        <change>
            <p>
                A non-numeric prefix in a tree menu sort key would cause an exception.
            </p>
            <issue id="2924"/>
        </change>
        <change>
            <p>
                Copying a document did not copy its menus.
            </p>
            <issue id="2992"/>
        </change>
        <change>
            <p>
                If a category type was changed it would not affect editing cached documents.
            </p>
            <issue id="3526"/>
        </change>
    </changes>

    <changes for="administrators">
        <change>
            <p>
                Accessing <path>/servlet/Version</path> now 
                prints the versions of java, the servlet container, and the database along with the imCMS version.
            </p>
            <issue id="3519"/>
        </change>
        <change>
            <p>
                It was impossible to delete some directories in the file manager.
            </p>
            <issue id="3509"/>
        </change>
        <change>
            <p>
                Disconnect from database when the webapp is shut down.
            </p>
            <issue id="3511"/>
        </change>
        <change>
            <p>
                Pressing "Add" or "Remove" when assigning templates to template groups with no templates listed
                would throw an exception.
            </p>
            <issue id="3479"/>
        </change>
        <change>
            <p>
                Refactored <path>login/access_denied.jsp</path> and <path>login/no_permission.jsp</path>
                into <path>login/index.jsp</path>.
            </p>
            <issue id="3467"/>
        </change>
        <change>
            <p>
                Renaming templates to already existing name would throw an exception.
            </p>
            <issue id="3466"/>
        </change>
        <change>
            <p>
                Allow superadmin to edit his/her own roles.
            </p>
            <issue id="2935"/>
        </change>
        <change>
            <p>
                Removed "List new/modified documents", and moved its functionality to the search form.
            </p>
            <issue id="3421"/>
        </change>
        <change>
            <p>
                If a role was removed, editing permissions for a cached document with that role would throw an exception.
            </p>
            <issue id="3420"/>
        </change>
        <change>
            <p>
                Prevent multiple users from being created with the same name.
            </p>
            <issue id="3150"/>
        </change>
        <change>
            <p>
                Users with the useradmin role could edit any user under certain conditions.
            </p>
            <issue id="2757"/>
        </change>
        <change>
            <p>
                Scheduled indexing may now be disabled by setting <config>IndexingSchedulePeriodInMinutes</config>
                in <path>server.properties</path> to <value>0</value>.
            </p>
            <issue id="3144"/>
        </change>
        <change>
            <p>
                Build index in subdirectories of <path>WEB-INF/index</path> instead of in <path>WEB-INF/index.new</path>. 
            </p>
            <issue id="3491"/>
        </change>
        <change>
            <p>
                For each reload of the webapp a new background indexing thread would be started,
                leading to multiple concurrent indexings.
                This has been worked around so that an indexing thread terminates
                if it notices that the index has been changed.
            </p>
            <issue id="3155"/>
        </change>
        <change>
            <p>
                Some error pages were shown as html code.
            </p>
            <issue id="3501"/>
        </change>
        <change>
            <p>
                Fixed spurious NullPointerExceptions in "LRUMap.reuseMapping()" due to unsynchronized access.
            </p>
            <issue id="2923"/>
        </change>
        <change>
            <p>
                Documents were not removed from the index when deleted.
            </p>
            <issue id="3182"/>
        </change>
        <change>
            <p>
                Increased space for system message to 1000 characters.
            </p>
            <issue id="3072"/>            
        </change>
    </changes>
    
    <changes for="site developers">
        <change>
            <p>
                Added the method <method>DatabaseService.getDataSource()</method>
                for accessing the underlying DataSource.
            </p>
            <issue id="3527"/>
        </change>
        <change>
            <p>
                The login page now passes along parameters "next_meta" and "next_url",
                either of which can be used to redirect the user after login.
            </p>
            <issue id="3433"/>
        </change>
        <change>
            <p>
                Added the following methods to <class>com.imcode.imcms.api.Document</class>:
            </p>
            <ul>
                <li><method>Document.getKeywords()</method></li>
                <li><method>Document.setKeywords(Set)</method></li>
                <li><method>Document.isLinkableByOtherUsers()</method></li>
                <li><method>Document.setLinkableByOtherUsers(boolean)</method></li>
                <li><method>Document.isSearchDisabled()</method></li>
                <li><method>Document.setSearchDisabled(boolean)</method></li>
            </ul>
            <issue id="2930"/>
            <issue id="2931"/>
            <issue id="2932"/>
        </change>
        <change>
            <p>
                Deprecated the method <method>TextDocument.MenuItem.getManualNumber()</method>,
                and added the replacement methods <method>TextDocument.MenuItem.setSortKey(Integer)</method>
                and <method>TextDocument.MenuItem.getSortKey()</method>.
            </p>
            <issue id="2927"/>
        </change>
        <change>
            <p>
                Added method <method>TextDocument.MenuItem.setTreeKey(TreeKey)</method>.
            </p>
            <issue id="2928"/>
        </change>
        <change>
            <p>
                Deprecated methods <method>Document.setStatus(int)</method> and <method>Document.getStatus()</method>.
                Added the replacement methods <method>Document.setPublicationStatus(PublicationStatus)</method>
                and <method>Document.getPublicationStatus()</method> and the class <class>Document.PublicationStatus</class>.
            </p>
            <issue id="3037"/>
        </change>
        <change>
            <p>
                Deprecated methods <method>Document.setPermissionSetIdForRole(Role,int)</method>
                and <method>Document.getPermissionSetIdForRole(Role)</method>.
                Added the replacement methods <method>Document.setPermissionSetTypeForRole(Role,DocumentPermissionSetType)</method>
                and <method>Document.getPermissionSetTypeForRole(Role)</method>
                and the class <class>DocumentPermissionSetType</class>.
            </p>
            <p>
                Deprecated method <method>DocumentPermissionSet.getType()</method> with no replacement.
            </p>
            <issue id="3037"/>
        </change>
        <change>
            <p>
                Deprecated methods <method>User.setCountyCouncil(String)</method>
                and <method>User.getCountyCouncil()</method>.
                Added the replacement methods <method>User.setProvince(String)</method>
                and <method>User.getProvince()</method>.
            </p>
            <issue id="3537"/>
        </change>
        <change>
            <p>
                Added method <method>DocumentService.deleteDocument(Document)</method>.
            </p>
            <issue id="3428"/>
        </change>
        <change>
            <p>
                Added method <method>UserService.getUser(int)</method>.
            </p>
            <issue id="2929"/>
        </change>
        <change>
            <p>
                You can now set the creator of a new Document.
            </p>
            <issue id="3012"/>
        </change>
        <change>
            <p>
                Added class <class>LuceneQuery</class> which allows using the Lucene API directly.
            </p>
            <issue id="2364"/>
        </change>
        <change>
            <p>
                Including a non-existent path using an include-tag would throw a <class>NullPointerException</class>.
            </p>
            <issue id="3490"/>
        </change>
    </changes>
    
    <changes for="developers">
        <change>
            <p>
                SQL DDL is now generated from XML source using Apache DdlUtils.
            </p>
            <p>
                SQL procedures previously stored in the database are now loaded from disk.
                Many of them have been removed.
            </p>
            <issue id="1288"/>
            <issue id="3436"/>
        </change>
        <change>
            <p>
                Refactored parts of the database layer into a separate library named imcode-db.
            </p>
            <issue id="3454"/>
        </change>
        <change>
            <p>
                Removed the tools classes and extracted libraries imcode-util and imcode-ant-tasks.
            </p>
            <issue id="3304"/>
        </change>
        <change>
            <p>
                A document is always fetched from the database inside of a transaction.
            </p>
            <issue id="3162"/>
        </change>
        <change>
            <p>
                JSPs are now compiled during the build to find errors.
            </p>
            <issue id="2089"/>
        </change>
        <change>
            <p>
                Checkstyle is run during the build to find style errors.
            </p>
            <issue id="3443"/>
        </change>
        <change>
            <p>
                Building with a platform default encoding other than iso-8859-1 would fail.
            </p>
            <issue id="3459"/>
            <issue id="3462"/>
        </change>
        <change>
            <p>
                A <class>ServletContextListener</class> is used to start up, instead of a load-on-startup servlet.
            </p>
            <issue id="3510"/>
        </change>
        <change>
            <p>
                The links on the first welcome page will now be accurate regardless of context path.
            </p>
            <issue id="3514"/>
        </change>
    </changes>
    
</changeset>
    
    
<changeset version="2a.0.0">

    <changes for="users">
        <change>
            <p>
                Fixed a NullPointerException when trying to view a textpage containing a
                filedocument-image that had been deleted.
            </p>
            <issue id="3125"/>
        </change>
        <change>
            <p>
                Made <tag>&lt;?imcms:include file="..."?&gt;</tag> recursively parse tags.
            </p>
            <issue id="3122"/>
        </change>
    </changes>

    <changes for="site developers">
        <change>
            <p>
                <method>UserService.getUser(String)</method> now returns null for non-existing users.
            </p>
            <issue id="3167"/>
        </change>
    </changes>

</changeset>


<changeset version="2.2.0">

    <changes for="users">
        <change>
            <p>
                Added "Save" and "Save and close" buttons to text editor.
            </p>
            <issue id="2937"/>
        </change>
    </changes>

    <changes for="site developers">
         <change>
            <p>
                When including other documents,
                the <class>TextDocumentViewing</class> in the request was replaced,
                so that subsequent <class>TextDocumentViewings</class>
                in the including document came from the included document.
            </p>
            <issue id="3062"/>
         </change>
    </changes>

</changeset>


<changeset version="2.1.1">

    <changes for="users">
        <change>
            <p>
                Fixed a problem where a user would lose all his roles when editing himself.
            </p>
            <issue id="2925"/>
        </change>
    </changes>

    <changes for="site developers">
        <change>
            <p>
                There was a mistake made with the
                <method>ContentManagementSystem.runAsSuperadmin(ContentManagementSystemRunnable)</method>
                method so it actually did not work at all.
            </p>
            <issue id="2901"/>
        </change>
    </changes>

</changeset>

<changeset version="2.1.0">

     <changes importance="high" for="administrators">
        <change>
            <p>
                Fixed a security hole that could let an attacker overwrite any file in the system.
            </p>
            <issue id="2891"/>
        </change>
    </changes>

    <changes for="users">
        <change>
            <p>
                Only read permission on a document was required to add it to a menu.
                Now at least restricted 2 is required.
            </p>
            <issue id="2895"/>
        </change>
        <change>
            <p>
                Fixed a bug that made it impossible to set "edit texts" permission for restricted 1 or 2.
            </p>
            <issue id="2885"/>
        </change>
        <change>
            <p>
                Fixed a bug that would cause text in text fields to be interpreted as velocity code when
                displayed for editing.
            </p>
            <issue id="2892"/>
        </change>
        <change>
            <p>
                Made enter submit a text field when using "rows='1'".
            </p>
            <issue id="2881"/>
        </change>
        <change>
            <p>
                Fixed a javascript error when editing texts and using the <attr>formats</attr> attribute.
            </p>
            <issue id="2879"/>
        </change>
        <change>
            <p>
                The text editor would insert spurious <tag>&lt;br /&gt;</tag>-tags when the text was empty.
                They are now removed when saving and when switching formats.
            </p>
            <issue id="2890"/>
        </change>
        <change>
            <p>
                Fixed an exception when trying to edit a non-existing document.
            </p>
            <issue id="2898"/>
        </change>
    </changes>

    <changes for="template creators">
        <change>
            <p>
                Allow velocity code in all tag attributes.
                See <localfile>TEMPLATE_SYNTAX.TXT</localfile> for details.
            </p>
            <issue id="2785"/>
        </change>
        <change>
            <p>
                Whitespace in <attr>label</attr>-attributes are now normalized,
                i.e. consecutive runs of whitespace are replaced by a single space.
                This is a workaround for newlines in the <attr>label</attr>-attribute
                not being handled correctly in some places.
            </p>
            <issue id="2874"/>
        </change>
    </changes>

    <changes for="administrators">
        <change>
            <p>
                Fixed a bug where deleted documents would remain in the cache.
            </p>
            <issue id="2882"/>
        </change>
        <change>
            <p>
                Allow role names of up to 60 characters, and display more than three roles at a time.
            </p>
            <issue id="2889"/>
        </change>
        <change>
            <p>
                Fixed a bug that caused text in templates to be interpreted as velocity code when displayed for editing.
            </p>
            <issue id="2888"/>
        </change>
        <change>
            <p>
                Updated jTDS to version 1.0.
            </p>
            <issue id="2883"/>
        </change>
        <change>
            <p>
                Fixed a problem where references to removed documents
                were retained in menus, causing NullPointerExceptions.
            </p>
            <issue id="2894"/>
        </change>
    </changes>

    <changes for="site developers">
        <change>
            <p>
                Added package <package>com.imcode.imcms.api.contrib</package>,
                containing class <class>DateTextFieldTextDocumentComparator</class>,
                contributed by Anders Flodell and Pontus Amberg at Vetenskapsrådet.
            </p>
            <issue id="2897"/>
        </change>
        <change>
            <p>
                Added class <class>ContentManagementSystemRunnable</class> and
                method <method>ContentManagementSystem.runAsSuperadmin(ContentManagementSystemRunnable)</method>
                to allow code that has been signed by an administrator to run with superadmin-privileges.
            </p>
            <p>
                The following things are required to run code with superadmin-privileges:
            </p>
            <ul>
                <li><config>KeyStorePath</config> in <path>server.properties</path> must be the path of a keystore.</li>
                <li>The class implementing <class>ContentManagementSystemRunnable</class> must be signed (e.g. inside a signed jar-file).</li>
                <li>All certificates used for signing the class must be found in the keystore.</li>
            </ul>
            <p>
                See <url>http://java.sun.com/docs/books/tutorial/jar/sign/</url>
                for more information about signing jar files.
            </p>
            <issue id="2875"/>
        </change>
        <change>
            <p>
                Made it possible to edit categories through the API.
            </p>
            <p>
                Added methods <method>setName()</method>, <method>setDescription()</method>,
                and <method>setImage()</method> to <class>Category</class>.
            </p>
            <p>
                Added method <method>DocumentService.saveCategory(Category)</method>.
            </p>
            <p>
                Deprecated method <method>DocumentService.createNewCategory(String, String, String, CategoryType)</method>.
                Use <method>Category.Category(String, CategoryType)</method>
                and <method>DocumentService.saveCategory(Category)</method> instead.
            </p>
            <issue id="2790"/>
        </change>
        <change>
            <p>
                Methods <method>UserService.getRole(int)</method> and <method>UserService.getRole(String)</method>
                no longer require superadmin-permissions.
            </p>
            <issue id="2884"/>
        </change>
        <change>
            <p>
                Methods <method>TextDocument.Menu.addDocument(Document)</method>
                and <method>TextDocument.Menu.removeDocument(Document)</method> erroneously required
                edit-permissions for the document added or removed, instead of the menu document as intended.
            </p>
            <issue id="2893"/>
        </change>
        <change>
            <p>
                Added fields <tag>section_id</tag>, <tag>category</tag>, <tag>category_type</tag>,
                and <tag>category_type_id</tag> to search index.
            </p>
            <issue id="2887"/>
        </change>
        <change>
            <p>
                Added the constants <variable>Document.LifeCyclePhase.NEW</variable>,
                <variable>Document.LifeCyclePhase.APPROVED</variable>,
                <variable>Document.LifeCyclePhase.DISAPPROVED</variable>,
                <variable>Document.LifeCyclePhase.PUBLISHED</variable>,
                <variable>Document.LifeCyclePhase.ARCHIVED</variable>,
                and <variable>Document.LifeCyclePhase.UNPUBLISHED</variable>,
                to be used as values in searches on the field "phase".
            </p>
            <issue id="2880"/>
        </change>
    </changes>

    <changes for="developers">
        <change>
            <p>
                The java code in the <path>tools</path> directory were not built with
                source="1.4" and target="1.4".
                This caused parts of imCMS to break when compiled with java 1.5 and run on java 1.4.
            </p>
            <issue id="2878"/>
        </change>
    </changes>

</changeset>

<changeset version="2.0.0">

    <changes importance="high" for="users">
        <change>
            <p>
                New url format for documents: <path>/imcms/1001</path> instead of <path>/imcms/servlet/GetDoc?meta_id=1001</path>.
                The old format still works, but this means that relative links in pages are likely to break.
            </p>
            <issue id="1163"/>
        </change>
        <change>
            <p>
                To alleviate broken relative links, <path>/imcms/GetDoc?meta_id=1001</path> now works as well as <path>/imcms/servlet/GetDoc?meta_id=1001</path>.
            </p>
            <issue id="2727"/>
        </change>
    </changes>

    <changes importance="high" for="administrators">
        <change>
            <p>
                We're now using jTDS instead of Microsofts JDBC driver.
                The Microsoft driver may still somewhat work,
                but it is strongly recommended that you use jTDS instead.
                To do this, change the following values in <path>server.properties</path>:
            </p>
            <ul>
                <li>Set <config>JdbcDriver</config> to <value>net.sourceforge.jtds.jdbc.Driver</value></li>
                <li>Set <config>JdbcUrl</config> to
                    <value>jdbc:jtds:sqlserver://<replace>host</replace>:<replace>port</replace>/;AppName=imCMS;DatabaseName=<replace>databasename</replace></value>
                    substituting correct values for <replace>host</replace>,
                    <replace>port</replace>, and <replace>databasename</replace>.</li>
            </ul>
            <issue id="1850"/>
        </change>
        <change>
            <p>
                We require javamail 1.3 or later, but Tomcat 4.1.30 and earlier includes javamail 1.2,
                which overrides our included implementation (GNU classpathx javamail).
            </p>
            <p>
                If you're using Tomcat 4.1.30 or earlier, you can do one of three things:
            </p>
            <ul>
                <li>Recommended: Upgrade Tomcat to version 4.1.31 or later.</li>
                <li>Remove <path>mail.jar</path> and <path>activation.jar</path> from <path>tomcat/common/lib</path>.
                    If you use any web applications that require any of them, you can put them in the <path>WEB-INF/lib</path> directory of those applications.
                     imCMS will use its own implementation.</li>
                <li>Replace <path>mail.jar</path> in the directory <path>tomcat/common/lib</path> with <path>mail.jar</path> from JavaMail 1.3 or later.
                    JavaMail can be downloaded from <url>http://java.sun.com/products/javamail/downloads/</url>
                </li>
            </ul>
            <p>
                If you are using another servlet engine that includes an older implementation of javamail,
                similar action may be required.
            </p>
            <issue id="2859"/>
        </change>
        <change>
            <p>
                Specifically, the new url format is
                <path><replace>contextpath</replace><replace>prefix</replace><replace>document-id</replace></path>,
                e.g. <path>/imcms<replace>prefix</replace>1001</path>.
                The <replace>prefix</replace> can be set with the setting <config>DocumentPathPrefix</config> in <path>server.properties</path>.
                The default is <value>/</value>. Comment this out to disable the new url format.
            </p>
            <issue id="2733"/>
        </change>
        <change>
            <p>
                The latest documents requested from the database are now cached in memory.
                This makes imCMS much faster, but means that changes to the database won't be seen.
                The maximum number of documents cached can be set using
                <config>DocumentCacheMaxSize</config> in <path>server.properties</path>.
                The default is to cache at most 100 documents.
            </p>
            <issue id="2083"/>
            <issue id="2864"/>
        </change>
        <change>
            <p>
                All the class-files that used to live in <path>WEB-INF/classes</path>
                are now packaged in one jar file in <path>WEB-INF/lib</path>.
            </p>
            <issue id="2746"/>
        </change>
        <change>
            <p>
                Some objects were put in sessions when editing documents, and never removed.
                These are now removed when no longer needed. This might reduce memory usage a bit.
            </p>
            <issue id="2750"/>
        </change>
    </changes>

    <changes for="users">
        <change>
            <p>
                A new function called "My pages" gives you an easy overview of your documents.
                It is accessible through the "admin" button for users
                which have any role that has permission to access "My pages".
            </p>
            <issue id="2578"/>
        </change>
        <change>
            <p>
                A new better html editor (<url>http://www.dynarch.com/projects/htmlarea/</url>)
                which also supports Mozilla browsers has been incorporated.
            </p>
            <issue id="2548"/>
        </change>
        <change>
            <p>
                The search page now allows much more advanced searches.
            </p>
            <issue id="2578"/>
        </change>
        <change>
            <p>
                File extension "dot" is now recognized as a Microsoft Word file.
            </p>
            <issue id="2681"/>
        </change>
        <change>
            <p>
                File extension "ppt" is now recognized as a Microsoft Powerpoint file.
            </p>
            <issue id="2743"/>
        </change>
        <change>
            <p>
                Updated the look of the user interface a bit, notably the adminbuttons and the template dialog.
            </p>
            <issue id="2796"/>
        </change>
        <change>
            <p>
                One can now on the permission page set a default template to be used for new text documents.
            </p>
            <issue id="2451"/>
        </change>
        <change>
            <p>
                Don't display a broken image for an empty image field.
            </p>
            <issue id="2567"/>
        </change>
        <change>
            <p>
                Fixed problem with previewing images with non-ASCII characters in the name in the image browser.
            </p>
            <issue id="2653"/>
        </change>
        <change>
            <p>
                Don't show button to upload images if lacking permission to do so.
            </p>
            <issue id="2734"/>
        </change>
        <change>
            <p>
                Changed certain file uploading error messages to be somewhat clearer.
            </p>
            <issue id="2591"/>
        </change>
        <change>
            <p>
                Fixed a problem where users were allowed to access the document "page info" without proper permissions.
            </p>
            <issue id="2680"/>
        </change>
        <change>
            <p>
                Set creation date to "now" for copies of documents.
            </p>
            <issue id="2737"/>
        </change>
        <change>
            <p>
                Fixed help message on "file edit page".
            </p>
            <issue id="2682"/>
        </change>
        <change>
            <p>
                The OK button on the document "page info" page was unclickable in Safari on Mac due to a javascript.
            </p>
            <issue id="2703"/>
        </change>
        <change>
            <p>
                Hide categories on "page info" page if none exist.
            </p>
            <issue id="2794"/>
        </change>
        <change>
            <p>
                Added shortcut buttons to set dates to "Now" on "page info" page.
            </p>
            <issue id="2794"/>
        </change>
        <change>
            <p>
                The creator and some dates were not set properly for copied documents.
            </p>
            <issue id="2803"/>
        </change>
        <change>
            <p>
                Removed misleading instructions on how to create documents.
            </p>
            <issue id="2799"/>
        </change>
        <change>
            <p>
                Fixed problem with data for browser documents not being saved on creation.
            </p>
            <issue id="2839"/>
        </change>
        <change>
            <p>
                Missing schemes are now automatically added to urls.
            </p>
            <issue id="2860"/>
        </change>
        <change>
            <p>
                The link checker now handles relative and schemeless urls.
            </p>
            <issue id="2861"/>
        </change>
        <change>
            <p>
                When editing menus, for each menu display two numbers.
            </p>
            <p>
                One number is the number of documents a visitor to the site would see in the menu,
                and the other number is the number of documents the current user can see when editing the menu.
            </p>
            <issue id="2800"/>
        </change>
        <change>
            <p>
                Allow setting the link target when editing a file document.
            </p>
            <issue id="2771"/>
        </change>
    </changes>
    <changes for="template creators">
        <change>
            <p>
                Added the file <localfile>TEMPLATE_SYNTAX.TXT</localfile> containing a basic reference to the template tags.
            </p>
            <issue id="2689"/>
        </change>
        <change>
            <p>
                Local includes can now be made using <tag>&lt;?imcms:include path="/relative/to/context/path"?></tag>.
                These don't require a http-request to localhost as url-includes do,
                are a magnitude more efficient, and don't spam the access-log.
            </p>
            <issue id="2684"/>
        </change>
        <change>
            <p>
                Jakarta Velocity can now be used in templates, between <tag>&lt;?imcms:velocity?> ... &lt;?/imcms:velocity?></tag> tags.
                See the file <localfile>TEMPLATE_SYNTAX.TXT</localfile> for details.
            </p>
            <issue id="2668"/>
        </change>
        <change>
            <p>
                Attributes <attr>pre</attr> and <attr>post</attr>
                can now be used on <tag>&lt;?imcms:menu?></tag>.
            </p>
            <issue id="2668"/>
        </change>
        <change>
            <p>
                Attributes in tags can now be html-escaped, like so: <tag>&lt;?imcms:text label="&amp;quot;quoted text&amp;quot;"?></tag>.
            </p>
            <issue id="2783"/>
        </change>
        <change>
            <p>
                New attribute for <tag>&lt;?imcms:menu?></tag>: <attr>defaulttemplate</attr> - specify the name of a template to use for new text documents created in this menu.
            </p>
            <issue id="2689"/>
        </change>
        <change>
            <p>
                New attribute for <tag>&lt;?imcms:text?></tag>: <attr>formats</attr> - specify what editor modes are available.
            </p>
            <issue id="2709"/>
        </change>
        <change>
            <p>
                New attribute for <tag>&lt;?imcms:text?></tag>: <attr>rows</attr> - indicate the preferred number of rows to the editor.
            </p>
            <issue id="2764"/>
        </change>
    </changes>

    <changes for="administrators">
        <change>
            <p>
                When something went wrong during initialization, a useless generic "NoClassDefFoundError" was given.
            </p>
            <issue id="2669"/>
        </change>
        <change>
            <p>
                Certain html files were not viewable in the file manager.
            </p>
            <issue id="2661"/>
        </change>
        <change>
            <p>
                Fixed a problem in the <path>diff-1.10.2-1.11.sql</path> database upgrade script.
            </p>
            <issue id="2692"/>
        </change>
        <change>
            <p>
                Fixed an error when trying to edit a user.
            </p>
            <issue id="2696"/>
        </change>
        <change>
            <p>
                Make sure a useradmin only can list users he can edit.
            </p>
            <issue id="2757"/>
        </change>
        <change>
            <p>
                Sometimes when using the file administrator, some files would be unremovable.
                Trying to remove them will now give a rather nasty error message instead of failing silently.
                This still needs improvement.
            </p>
            <issue id="2442"/>
        </change>
        <change>
            <p>
                The link checker is now multithreaded, and one can choose to list only broken links.
                Also, one can specify a range of document ids to check.
            </p>
            <issue id="2587"/>
            <issue id="2789"/>
        </change>
        <change>
            <p>
                Use a default value of <value>1440</value> (24 hours) for <config>IndexingSchedulePeriodInMinutes</config>
                if missing from <path>server.properties</path>.
            </p>
            <issue id="2786"/>
        </change>
        <change>
            <p>
                Reversed sort order of "List new/updated pages".
            </p>
            <issue id="2842"/>
        </change>
        <change>
            <p>
                Allow to set no roles for users, leaving only the "Users"-role.
            </p>
            <issue id="2806"/>
        </change>
        <change>
            <p>
                Fixed a problem with mismatched filenames in the chat on case-sensitive filesystems.
            </p>
            <issue id="2845"/>
        </change>
        <change>
            <p>
                Empty passwords are no longer allowed for external authentication, e.g. LDAP.
            </p>
            <issue id="2847"/>
        </change>
        <change>
            <p>
                Updated the look of the "Edit external user" page.
            </p>
            <issue id="2334"/>
        </change>
        <change>
            <p>
                Fixed a problem with modified date of a document only being updated on every second save.
            </p>
            <issue id="2858"/>
        </change>
        <change>
            <p>
                The checksums in <path>WEB-INF/version.txt</path> are now in <path>WEB-INF/checksums.txt</path> instead,
                and are not output by the "Version" servlet.
            </p>
            <issue id="2865"/>
        </change>
        <change>
            <p>
                Made a "RebuildIndex" servlet for rebuilding the index,
                and fixed the "Restart" servlet to do a more thorough/proper restart of imCMS.
            </p>
            <issue id="2855"/>
        </change>
        <change>
            <p>
                Don't allow removing a template group that contains templates.
            </p>
            <issue id="2836"/>
        </change>
        <change>
            <p>
                Don't print password to log when failing to log in to an LDAP server.
            </p>
            <issue id="2828"/>
        </change>
        <change>
            <p>
                List users in order of last name and first name instead of by id.
            </p>
            <issue id="2821"/>
        </change>
    </changes>

    <changes for="site developers">
        <change>
            <p>
                Created package <package>com.imcode.util</package> with generic non-imCMS-specific utilities:
            </p>
            <dl>
                <dt><class>ChainableReversibleNullComparator</class></dt><dd>Moved here from <package>com.imcode.imcms.api.util</package></dd>
                <dt><class>ComparatorWrapper</class></dt><dd>Moved here from <package>com.imcode.imcms.api.util</package></dd>
                <dt><class>HumanReadable</class></dt><dd>Get human readable byte sizes and time spans.</dd>
                <dt><class>ImageSize</class></dt><dd>Get the size of an image in somewhat more efficient manner than <method><class>ImageIO</class>.read()</method>.</dd>
                <dt><class>MultipartHttpServletRequest</class></dt><dd>Extends <class>HttpServletRequest</class> for file upload with support from Jakarta Commons-FileUpload.</dd>
            </dl>
            <issue id="2493"/>
        </change>
        <change>
            <p>
                Users can now change their own attributes.
            </p>
            <issue id="2708"/>
        </change>
        <change>
            <p>
                Added classes:
            </p>
            <dl>
                <dt><class>Role</class></dt><dd>Represents a user-role.</dd>
                <dt><class>SaveException</class></dt><dd>Thrown when something can't be saved.</dd>
                <dt><class>AlreadyExistsException</class></dt><dd>Extends SaveException.</dd>
                <dt><class>TextDocumentViewing</class></dt><dd>Accessible in included JSPs and velocity code. Represents one viewing of a text document.</dd>
            </dl>
            <issue id="2676"/>
            <issue id="2776"/>
        </change>
        <change>
            <p>
                Changed classes:
            </p>
            <dl>
                <dt><class>MaxCategoriesOfTypeExceededException</class></dt><dd>Extends <class>SaveException</class></dd>
                <dt><class>CategoryAlreadyExistsException</class></dt><dd>Extends <class>AlreadyExistsException</class></dd>
                <dt><class>CategoryTypeAlreadyExistsException</class></dt><dd>Extends <class>AlreadyExistsException</class></dd>
                <dt><class>UserAlreadyExistsException</class></dt><dd>Extends <class>AlreadyExistsException</class></dd>
                <dt><class>RoleAlreadyExistsException</class></dt><dd>Extends <class>AlreadyExistsException</class></dd>
            </dl>
        </change>
        <change>
            <p>
                Deprecated classes:
            </p>
            <dl>
                <dt><class>com.imcode.imcms.api.util.ChainableReversibleNullComparator</class></dt><dd>Moved to <package>com.imcode.util</package></dd>
                <dt><class>com.imcode.imcms.api.util.ComparatorWrapper</class></dt><dd>Moved to com.imcode.util</dd>
            </dl>
        </change>
        <change>
            <p>
                Added methods:
            </p>
            <dl>
                <dt><method>ContentManagementSystem.fromRequest(ServletRequest)</method></dt><dd>Get the <class>ContentManagementSystem</class>.</dd>
                <dt><method>Document.setPermissionSetIdForRole(Role,int)</method>m</dt><dd>Replaces <method>Document.setPermissionSetForRole(String,int)</method></dd>
                <dt><method>Document.getPermissionSetIdForRole(Role)</method></dt><dd>Get the permission set id for a role</dd>
                <dt><method>DocumentService.getSection(String)</method></dt><dd>Get a section by name.</dd>
                <dt><method>Section.getId()</method></dt><dd>Get the id for a section.</dd>
                <dt><method>TextDocument.Menu.getVisibleDocuments()</method></dt><dd>Returns the documents visible in the menu.</dd>
                <dt><method>TextDocument.Menu.getVisibleMenuItems()</method></dt><dd>Returns the menuitems visible in the menu.</dd>
                <dt><method>User.getRoles()</method></dt><dd>Get the user's roles.</dd>
                <dt><method>User.setRoles(Role[])</method></dt><dd>Set the user's roles.</dd>
                <dt><method>User.hasRole(Role)</method></dt><dd>Returns true if the user has the role.</dd>
                <dt><method>User.addRole(Role)</method></dt><dd>Add a role to the user.</dd>
                <dt><method>User.removeRole(Role)</method></dt><dd>Remove a role from the user.</dd>
                <dt><method>UserService.createNewRole(String)</method></dt><dd>Create a new role</dd>
                <dt><method>UserService.deleteRole(Role)</method></dt><dd>Delete a role, requires superadmin permission.</dd>
                <dt><method>UserService.getAllRoles()</method></dt><dd>Returns all roles in the system, requires superadmin permission.</dd>
                <dt><method>UserService.getAllUsersWithRole(Role)</method></dt><dd>Get all users with the given permission.</dd>
                <dt><method>UserService.getRole(int)</method></dt><dd>Get a role by id, requires superadmin permission.</dd>
                <dt><method>UserService.getRole(String)</method></dt><dd>Get a role by name, requires superadmin permission.</dd>
                <dt><method>UserService.saveRole(Role)</method></dt><dd>Save changes to the role, requires superadmin permission.</dd>
                <dt><method>UserService.createNewUser(String, String)</method></dt><dd>Create a new user.</dd>
                <dt><method>UserService.saveUser(User)</method></dt><dd>Save a new or existing user, requires superadmin permission.</dd>
                <dt><method>User.set*</method></dt><dd>Added a bunch of setters.</dd>
                <dt><method>User.get*</method></dt><dd>Added a few missing getters.</dd>
            </dl>
            <issue id="2648"/>
            <issue id="2648"/>
            <issue id="2677"/>
            <issue id="2827"/>
            <issue id="2827"/>
        </change>
        <change>
            <p>
                Changed methods:
            </p>
            <dl>
                <dt><method>DocumentService.saveChanges(Document)</method></dt><dd>Throws <class>SaveException</class> instead of <class>MaxCategoriesOfTypeExceededException</class>.</dd>
                <dt><method>TextDocument.setInclude(int,TextDocument)</method></dt><dd>Now requires you to call <method>DocumentService.saveChanges()</method> afterwards.</dd>
                <dt><method>TextDocument.Menu.getDocuments()</method></dt><dd>Returns the same documents as can be seen when editing the menu.</dd>
                <dt><method>TextDocument.Menu.getMenuItems()</method></dt><dd>Returns the same menuitems as can be seen when editing the menu. No longer throws <class>NoPermissionException</class>.</dd>
                <dt><method>UserService.addNewRole(String)</method></dt><dd>Returns the new role.</dd>
            </dl>
            <issue id="2827"/>
            <issue id="2827"/>
        </change>
        <change>
            <p>
                Undeprecated methods:
            </p>
            <dl>
                <dt><method>TextDocument.setTemplate(Template)</method></dt><dd>Use when you don't care about setting a template group.</dd>
            </dl>
            <issue id="2791"/>
        </change>
        <change>
            <p>
                Deprecated methods:
            </p>
            <dl>
                <dt><method>Document.setPermissionSetForRole(String,int)</method></dt><dd>Use <method>Document.setPermissionSetIdForRole(Role,int)</method>.</dd>
                <dt><method>User.getRoleNames()</method></dt><dd>Use <method>User.getRoles()</method></dd>
                <dt><method>User.hasRole(String)</method></dt><dd>Use <method>User.hasRole(Role)</method></dd>
                <dt><method>UserService.deleteRole(String)</method></dt><dd>Use <method>UserService.deleteRole(Role)</method></dd>
                <dt><method>UserService.getAllUserWithRole(String)</method></dt><dd>Use <method>UserService.getAllUsersWithRole(Role)</method></dd>
                <dt><method>UserService.getRoleNames(User)</method></dt><dd>Use <method>User.getRoles()</method></dd>
                <dt><method>UserService.getAllRolesNames()</method></dt><dd>Use <method>UserService.getAllRoles()</method></dd>
                <dt><method>UserService.setUserRoles(User,String[])</method></dt><dd>Use <method>User.setRoles(Role[])</method></dd>
                <dt><method>UserService.addNewRole(String)</method></dt><dd>Use <method>UserService.createNewRole(String)</method> and <method>UserService.saveRole(Role)</method></dd>
            </dl>
        </change>
        <change>
            <p>
                Removed methods:
            </p>
            <dl>
                <dt>DocumentService.createAndSaveNewTextDocument(Document)</dt><dd>Use <method>DocumentService.createNewTextDocument()</method> and <method>DocumentService.saveChanges(Document)</method></dd>
                <dt>DocumentService.createAndSaveNewUrlDocument(Document)</dt><dd>Use <method>DocumentService.createNewUrlDocument()</method> and <method>DocumentService.saveChanges(Document)</method></dd>
            </dl>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Unit tests are now enabled in the build by default.
            </p>
            <issue id="2664"/>
        </change>
        <change>
            <p>
                Target "copy-web" in an addon <path>build.xml</path> is now run when running the "web"-target in the main <path>build.xml</path>.
            </p>
            <issue id="2674"/>
        </change>
        <change>
            <p>
                Use jsp for "edit text" page.
            </p>
            <issue id="2549"/>
        </change>
        <change>
            <p>
                Added a unique index on column "login_name" in table "users".
            </p>
            <issue id="2663"/>
        </change>
        <change>
            <p>
                Compileable with java 1.5.
            </p>
            <issue id="2687"/>
        </change>
        <change>
            <p>
                Updated jars to the latest versions, and made sure all have understandable names with version numbers.
            </p>
            <issue id="2686"/>
        </change>
        <change>
            <p>
                Getting the size of an image was very slow.
            </p>
            <issue id="2685"/>
        </change>
        <change>
            <p>
                The column "role_id" in the table "roles" is now an identity column, and "role_name" is varchar(60).
            </p>
        </change>
        <change>
            <p>
                Don't update menus in database if they don't differ from the cache when saving a text-document.
            </p>
            <issue id="2672"/>
        </change>
        <change>
            <p>
                Fixed a problem where clones of users would share the same set of roles.
            </p>
            <issue id="2701"/>
        </change>
        <change>
            <p>
                Added possibility to set permissions for roles.
            </p>
            <issue id="2705"/>
        </change>
        <change>
            <p>
                Fixed hardcoded urls to the documentation site in the default template.
            </p>
            <issue id="2718"/>
        </change>
        <change>
            <p>
                Removed table "roles_permissions", no longer needed.
            </p>
            <issue id="2705"/>
        </change>
        <change>
            <p>
                All users are now always considered to have the "Users" role regardless of what the database says.
            </p>
            <issue id="2770"/>
        </change>
        <change>
            <p>
                Made an ant-target "distcheck" for verifying that the source distribution is buildable.
            </p>
            <issue id="2774"/>
        </change>
        <change>
            <p>
                Made it easier to build with LDAP enabled
            </p>
            <issue id="2818"/>
        </change>
        <change>
            <p>
                Texts are doubly indexed: With and without HTML-tags.
            </p>
            <issue id="2775"/>
        </change>
        <change>
            <p>
                Introduced the concept of <class>LifeCyclePhase</class> for a <class>DocumentDomainObject</class> (indexed as "phase"),
                corresponding to what users think of as "status".
            </p>
            <issue id="2855"/>
        </change>
        <change>
            <p>
                A group can now be used as the to-address of e-mails.
            </p>
            <issue id="2798"/>
        </change>
        <change>
            <p>
                The changelog (previously <path>CHANGES.TXT</path>, now <path>CHANGES.HTML</path>)
                is now generated from an xml-file using an xsl-stylesheet.
            </p>
            <issue id="2765"/>
        </change>
    </changes>
</changeset>
<changeset version="1.11.1">
    <changes for="administrators">
        <change>
            <p>
                In the fix to bug 2452 in 1.11.0, we changed the way files in file documents are saved to disk, forgetting backwards-compatibility. Administrators had to remove the "_se"-suffix from all files under "WEB-INF/uploads", or the files would not be found after an upgrade. This was fixed so the "_se" suffix is recognized again, and will be automatically removed when the file document is saved. Removing the suffix from the files on upgrade is still recommended.
            </p>
            <issue id="2452"/>
            <issue id="2650"/>
        </change>
        <change>
            <p>
                On a related note, don't show "WEB-INF/uploads" in "FileAdmin" by default.
            </p>
            <issue id="2640"/>
        </change>
        <change>
            <p>
                Made "/RD/*"-paths (as seen in the log) work again.
            </p>
            <issue id="2633"/>
        </change>
    </changes>
</changeset>
<changeset version="1.11.0">
    <changes importance="high" for="administrators">
        <change>
            <p>
                The "SelectMethod" in the JdbcUrl in "server.properties" MUST be set to "SelectMethod=cursor", otherwise you will get the error "Can't start a cloned connection while in manual transaction mode." when you try to save a document. This is due to the new transaction code. The default used to be "SelectMethod=direct".
            </p>
            <issue id="2569"/>
        </change>
    </changes>
    <changes for="users">
        <change>
            <p>
                Made it possible to upload several files in one filedocument.
            </p>
            <issue id="2452"/>
        </change>
        <change>
            <p>
                Fixed a race condition that could cause menus to be cleared when editing a text-document.
            </p>
            <issue id="2569"/>
        </change>
        <change>
            <p>
                File-extension "xls" on uploaded files is now recognized as a Microsoft Excel Spreadsheet.
            </p>
            <issue id="2534"/>
        </change>
        <change>
            <p>
                Fixed a problem with viewing uploaded PDF files with Adobe Acrobat 6.0.1.
            </p>
            <issue id="2511"/>
        </change>
        <change>
            <p>
                Fixed exception when trying to create an HTML-document.
            </p>
            <issue id="2543"/>
        </change>
        <change>
            <p>
                Changed some swedish names for different document types.
            </p>
            <issue id="1496"/>
        </change>
        <change>
            <p>
                Some form elements looked strange in "page info" in Internet Explorer 5.2 on Macintosh.
            </p>
            <issue id="2391"/>
        </change>
        <change>
            <p>
                Fixed a bug that made it hard to remove images.
            </p>
            <issue id="2567"/>
        </change>
        <change>
            <p>
                Show file-size on file-document-files and images.
            </p>
            <issue id="2520"/>
        </change>
        <change>
            <p>
                Distinguish directories in "FileAdmin" with gray background color, sort files and directories in alphabetical order, and make file-sizes more readable.
            </p>
            <issue id="2572"/>
        </change>
        <change>
            <p>
                Fixed a bug making it impossible to delete a text-document with more than one menu.
            </p>
            <issue id="2585"/>
        </change>
        <change>
            <p>
                HTML is now removed from text-fields before indexing, so a search for "foo bar" will now also find "&lt;em>foo&lt;/em> bar".
            </p>
            <issue id="2593"/>
        </change>
        <change>
            <p>
                Changed swedish name of text-document, "Ny sida" to "Textsida".
            </p>
            <issue id="1496"/>
        </change>
        <change>
            <p>
                Image-preview in old image archive was broken.
            </p>
            <issue id="2628"/>
        </change>
        <change>
            <p>
                Submitting the form several times (i.e. by double-clicking) when creating a new document no longer results in an error message and several documents created.
            </p>
            <issue id="2607"/>
        </change>
    </changes>
    <changes for="template creators">
        <change>
            <p>
                Put the imCMS-commercial html-comment (imcms_message.html) before the &lt;html>-tag instead of the before doctype declaration.
            </p>
            <issue id="2623"/>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                Disallow editing of user "user".
            </p>
            <issue id="2479"/>
        </change>
        <change>
            <p>
                Fixed a bug that made it impossible to create a category.
            </p>
            <issue id="2514"/>
        </change>
        <change>
            <p>
                Fixed a bug that prevented changing a category-type from multi-choice to single-choice.
            </p>
            <issue id="2515"/>
        </change>
        <change>
            <p>
                Database connections are now tested before use. This allows imCMS to survive database server restarts.
            </p>
            <issue id="2144"/>
        </change>
        <change>
            <p>
                "IndexingSchedulePeriodInMinutes" in "server.properties" now controls the time period between reindexings in minutes.
            </p>
            <issue id="2614"/>
        </change>
        <change>
            <p>
                Reindexing is no longer performed on startup unless needed.
            </p>
            <issue id="2625"/>
        </change>
        <change>
            <p>
                Added a little note about running SQL-scripts to INSTALL.TXT.
            </p>
            <issue id="2484"/>
        </change>
        <change>
            <p>
                The admin button is now visible for users with role "Useradmin" again.
            </p>
            <issue id="2629"/>
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Category now implements Comparable. Compares by name, ignoring case.
            </p>
        </change>
        <change>
            <p>
                UserService.getUser(String) no longer requires superadmin permissions.
            </p>
            <issue id="2527"/>
        </change>
        <change>
            <p>
                Added classes:
        - MailService - provides methods for sending e-mail.
        - Mail - represents a mail to be sent with MailService. Uses javax.activation.DataSource for attachments.
        - MailException - thrown by MailService.
        - FileDocument - represents a filedocument
        - FileDocument.FileDocumentFile - represents a single file in a filedocument. Implements javax.activation.DataSource.
            </p>
            <issue id="2490"/>
            <issue id="2490"/>
            <issue id="2551"/>
            <issue id="2551"/>
            <issue id="2551"/>
        </change>
        <change>
            <p>
                Added methods:
        - ContentManagementSystem.getMailService() -
        - DocumentService.createNewFileDocument() -
        - DocumentService.getXmlDomForDocument() - returns an org.w3c.dom.Document representing a document. Currently only works with text-documents.
        - Image.getSrc(String contextPath) - returns image-src with contextPath prepended.
        - Image.getSrcRelativeToContextPath() - returns image-src without contextPath prepended.
        - Image.getSize() - returns the size of the image in bytes.
        - User.getId() - returns the user id.
        - User.isDefaultUser() - returns true if the user is the default user ("user/user").
        - DocumentPermissionSet.getEditMenusPermission() - returns true if this permission-set allows editing of menus.
        - DocumentPermissionSet.setEditMenusPermission(boolean) - sets whether this permission-set allows editing of menus.
            </p>
            <issue id="2490"/>
            <issue id="2491"/>
            <issue id="2491"/>
            <issue id="2491"/>
            <issue id="2551"/>
            <issue id="2551"/>
            <issue id="2609"/>
            <issue id="2609"/>
            <issue id="2616"/>
            <issue id="2616"/>
        </change>
        <change>
            <p>
                Removed methods:
        - Image.getSrc() - use Image.getSrc(String contextPath) or Image.getSrcRelativeToContextPath()
        - Image.getSrcUrl() - use Image.getSrc(String contextPath) or Image.getSrcRelativeToContextPath() This was necessary to completely remove imCMS dependence on a specific context path.
            </p>
            <issue id="2491"/>
            <issue id="2491"/>
        </change>
        <change>
            <p>
                Removed deprecated fields:
        - Document.Comparator.ACTIVATED_DATETIME - use Document.Comparator.PUBLICATION_START_DATETIME
            </p>
        </change>
        <change>
            <p>
                Removed deprecated methods
        - Document.setModifiedDateTime(Date) - use Document.setModifiedDatetime(Date)
        - Document.getModifiedDateTime() - use Document.getModifiedDatetime()
        - Document.getCreatedDateTime() - use Document.getCreatedDatetime()
        - TextDocument.getMenuSortOrder() - use Menu.getSortOrder()
        - TextDocument.setMenuSortOrder(int) - use Menu.setSortOrder(int)
        - DocumentPermissionSet.getEditHeadlinePermission() - use DocumentPermissionSet.getEditDocumentInformationPermission()
        - DocumentPermissionSet.setEditHeadlinePermission(boolean) - use DocumentPermissionSet.setEditDocumentInformationPermission(boolean)
        - DocumentPermissionSet.getEditableMenuDocumentTypeNames() - removed, returning type-names is broken.
            </p>
            <issue id="2560"/>
            <issue id="2560"/>
            <issue id="2609"/>
            <issue id="2609"/>
            <issue id="2609"/>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                The document-deletion procedure is now run in an transaction.
            </p>
            <issue id="2495"/>
        </change>
        <change>
            <p>
                It's now possible to send attachments with mails. This uses the Java Activation Framework (javax.activation) and JavaMail API implementations from the GNU classpathx project.
            </p>
            <issue id="2542"/>
        </change>
        <change>
            <p>
                Replaced imCMS own image-parsing routines with javax.imageio.ImageIO
            </p>
            <issue id="2493"/>
        </change>
        <change>
            <p>
                Started to change the database API to allow for transactions.
            </p>
            <issue id="2569"/>
        </change>
        <change>
            <p>
                Text document menus are now saved inside a transaction.
            </p>
            <issue id="2569"/>
        </change>
    </changes>
</changeset>
<changeset version="1.10.3">
    <changes for="site developers">
        <change>
            <p>
                Added constants for use in search-strings:
        - TextDocument.TYPE_ID
        - UrlDocument.TYPE_ID
            </p>
        </change>
        <change>
            <p>
                Added methods:
        - boolean User.isSuperAdmin()
        - boolean User.canEdit(Document)
        - String[] User.getRoleNames()
        - DocumentService.createNewTextDocument(Document)
        - DocumentService.createNewUrlDocument(Document)
            </p>
            <issue id="2521"/>
            <issue id="2521"/>
        </change>
        <change>
            <p>
                Deprecated methods:
        - DocumentService.createAndSaveNewTextDocument(Document)
        - DocumentService.createAndSaveNewUrlDocument(Document)
            </p>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                The ldap implementation should no longer be dependent on Microsoft Active Directory. Rewrote a big part of the ldap-configuration in "server.properties":
        - "LdapUserName" is replaced by "LdapBindDn",
        - "LdapUserObjectClass" is set to "inetOrgPerson" by default.
        - "LdapUserIdentifyingAttribute" is replaced by "LdapUserAttribute.LoginName" which is only required if not using 'uid' in the "inetOrgPerson" objectclass. Ldap-attributes can now be arbitrarily mapped to user-properties. See the comments in "server.properties" for details.
            </p>
            <issue id="1981"/>
            <issue id="2516"/>
        </change>
        <change>
            <p>
                Fixed a bug where removing a single phone number from a user had no effect.
            </p>
            <issue id="2471"/>
        </change>
        <change>
            <p>
                Use dos-style line-endings in the text-files in the zip file, and unix-style line-endings in the tarball.
            </p>
            <issue id="2485"/>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Instead of empty strings, use "localhost" for default database-host and "imcms" for default database-name.
            </p>
            <issue id="2488"/>
        </change>
    </changes>
</changeset>
<changeset version="1.10.2">
    <changes for="site developers">
        <change>
            <p>
                Added method Image.isEmpty() to determine whether an image is empty or not.
            </p>
            <issue id="2344"/>
        </change>
        <change>
            <p>
                Image.getWidth() and Image.getHeight() now return the actual size of the image as it will be displayed, instead of 0, unless the actual size couldn't be determined.
            </p>
            <issue id="2475"/>
        </change>
        <change>
            <p>
                Fixed a bug which caused includes to be done with the included document in adminmode.
            </p>
            <issue id="2449"/>
        </change>
        <change>
            <p>
                Image-tags containing filedocument-images are hidden from users without permissions to the filedocument.
            </p>
            <issue id="2454"/>
        </change>
        <change>
            <p>
                Fixed a mistake which prevented the imCMS-advertisement in "imcms_message.html" from being output at the beginning of every page.
            </p>
            <issue id="2445"/>
        </change>
        <change>
            <p>
                Allow files with extensions "jsp" and "js" to be edited in the file administrator ("FileAdmin").
            </p>
            <issue id="2406"/>
        </change>
        <change>
            <p>
                Build a zip file/tarball so people don't have to download more than one file.
            </p>
            <issue id="2460"/>
        </change>
        <change>
            <p>
                Fixed a number of problems with the conference login.
            </p>
            <issue id="2419"/>
        </change>
        <change>
            <p>
                Fixed a bug with the linkeditor in browsers other than Internet Explorer.
            </p>
            <issue id="2462"/>
        </change>
        <change>
            <p>
                Made the html-editor optional through the use of a cookie.
            </p>
            <issue id="2327"/>
        </change>
        <change>
            <p>
                Fixed a bug with creating external links in the html-editor.
            </p>
            <issue id="2418"/>
        </change>
        <change>
            <p>
                Fixed a couple of bugs related to creating new conferences and new conference-users.
            </p>
        </change>
        <change>
            <p>
                Made listing many users somewhat quicker.
            </p>
            <issue id="2316"/>
        </change>
    </changes>
</changeset>
<changeset version="1.10.1">
    <changes>
        <change>
            <p>
                Fixed exception and possible menu-deletion when trying to readd an already existing document to a menu sorted by "manual" order.
            </p>
            <issue id="2443"/>
        </change>
        <change>
            <p>
                Included both english and swedish sql scripts in the distribution.
            </p>
        </change>
    </changes>
</changeset>
<changeset version="1.10.0">
    <changes for="users">
        <change>
            <p>
                Filedocuments of types "png", "gif", or "jpeg" can now be used as images.
            </p>
            <issue id="2128"/>
        </change>
        <change>
            <p>
                Completely redid the image-selecting interface to allow for the new filedocuments-as-images paradigm.
            </p>
            <issue id="2128"/>
        </change>
        <change>
            <p>
                Replaced dropdown for selecting document publisher with a user-select dialog, and made the document creator settable in the same manner.
            </p>
            <issue id="2149"/>
        </change>
        <change>
            <p>
                Allow filedocument filenames of up to 255 characters, truncating somewhat intelligently if needed.
            </p>
            <issue id="2088"/>
        </change>
        <change>
            <p>
                Only show links to documents which the user has at least read permission on, or which are visible to non-authorized users.
            </p>
            <issue id="2387"/>
        </change>
        <change>
            <p>
                Fixed exception when adding documents to a menu sorted by "manual" order.
            </p>
            <issue id="2390"/>
        </change>
        <change>
            <p>
                Setting the modified time of a document is now possible, but it will still be updated the next time the document is modified.
            </p>
            <issue id="2367"/>
        </change>
    </changes>
    <changes for="template creators">
        <change>
            <p>
                The label attribute now works for the include-tag: &lt;?imcms:include label="Include label"?>
            </p>
            <issue id="1622"/>
        </change>
        <change>
            <p>
                The outputdescription-attribute of the documentcategories tag now takes two values, "true" or "only":
        - "true": &lt;?imcms:documentcategories outputdescription="true"?> will output "categoryname - categorydescription"
        - "only": &lt;?imcms:documentcategories outputdescription="only"?> will output "categorydescription"
        - Not present: &lt;?imcms:documentcategories?> will output "categoryname".
            </p>
            <issue id="2151"/>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                The file "host.properties" is gone, and everything is put in "server.properties".
            </p>
            <issue id="2424"/>
        </change>
        <change>
            <p>
                Worked a little more on indexing robustness.
            </p>
            <issue id="2354"/>
        </change>
        <change>
            <p>
                Made the indexing work at a lower priority.
            </p>
            <issue id="2362"/>
        </change>
        <change>
            <p>
                Remove documents from the index when deleted.
            </p>
            <issue id="2365"/>
        </change>
        <change>
            <p>
                Fixed a bug in the linkchecker where some broken links would be flagged as OK.
            </p>
            <issue id="2336"/>
        </change>
        <change>
            <p>
                If "SessionCookieDomain" is set in "server.properties", a second JSESSIONID cookie will be set with the given domain.
            </p>
            <issue id="1886"/>
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Added methods TextDocument.getTextFields(), TextDocument.getImages(), and TextDocument.getIncludes()
            </p>
            <issue id="2344"/>
        </change>
        <change>
            <p>
                Added accessors Document.setVisibleInMenusForUnauthorizedUsers(boolean visibleInMenusForUnauthorizedUsers) and Document.isVisibleInMenusForUnauthorizedUsers()
            </p>
            <issue id="2351"/>
        </change>
        <change>
            <p>
                Added accessor Document.setCreator(User creator)
            </p>
            <issue id="2388"/>
        </change>
        <change>
            <p>
                Added method Document.getDocumentPermissionSetForUser()
            </p>
            <issue id="2153"/>
        </change>
        <change>
            <p>
                Added accessors TextDocument.Menu.getSortOrder() and TextDocument.Menu.setSortOrder(int sortOrder)
            </p>
            <issue id="2438"/>
        </change>
        <change>
            <p>
                Added method TextDocument.getMenus()
            </p>
            <issue id="2438"/>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Removed user-"categories".
            </p>
            <issue id="2149"/>
        </change>
        <change>
            <p>
                Refactored the code for creating and editing documents.
            </p>
            <issue id="2039"/>
        </change>
    </changes>
</changeset>
<changeset version="1.9.3">
    <changes>
        <change>
            <p>
                Only show links to documents which the user has at least read permission on, or which are visible to non-authorized users.
            </p>
            <issue id="2387"/>
        </change>
    </changes>
</changeset>
<changeset version="1.9.2">
    <changes>
        <change>
            <p>
                Fixed exception when adding documents to a menu sorted by "manual" order.
            </p>
            <issue id="2390"/>
        </change>
        <change>
            <p>
                Remove documents from the index when deleted.
            </p>
            <issue id="2365"/>
        </change>
    </changes>
</changeset>
<changeset version="1.9.1">
    <changes>
        <change>
            <p>
                Made the indexing a little more robust.
            </p>
        </change>
    </changes>
</changeset>
<changeset version="1.9.0">
    <changes for="users">
        <change>
            <p>
                Simple/advanced view toggle for docinfo.
            </p>
        </change>
        <change>
            <p>
                Admin-pages will now work on non-javascript-enabled browsers.
            </p>
        </change>
        <change>
            <p>
                All admin-pages now use the new blue/white look.
            </p>
        </change>
        <change>
            <p>
                The link checker will now also check linked images and urls in text-fields.
            </p>
        </change>
        <change>
            <p>
                "Administer conferences" functionality moved to "List new/updated pages".
            </p>
        </change>
        <change>
            <p>
                The session counter now counts sessions, not logins. This means that each visitor is only counted once per browser session, instead of once when entering the site and then again when logging in.
            </p>
        </change>
    </changes>
    <changes for="template creators">
        <change>
            <p>
                New template tag: &lt;?imcms:contextpath?> will be replaced by the "context path" of the webapp. The context path is the root path to the webapp, usually the name of the webapp preceded by a slash, for example "/imcms". This is useful when one wants to construct an absolute URL. Example: &lt;img src="&lt;?imcms:contextpath?>/images/imCMSpower.gif" alt="Powered by imCMS">
            </p>
        </change>
    </changes>
    <changes for="administrators">
        <change>
            <p>
                The webapp should now be possible to rename without having to change any templates.
            </p>
        </change>
        <change>
            <p>
                We now return correct HTTP status codes: 404 for "Not found", and 403 for "Forbidden/Permission denied".
            </p>
        </change>
        <change>
            <p>
                Changed database parameters to allow for different database-drivers: The parameters "Url", "Host", "Port", "DatabaseName" in imcms/WEB-INF/conf/server.properties were replaced by the single option "JdbcUrl", which for the Microsoft JDBC driver maps to the old parameters as follows: jdbc:microsoft:sqlserver://&lt;Host>:&lt;Port>;DatabaseName=&lt;DatabaseName>
            </p>
        </change>
        <change>
            <p>
                The "MaxConnectionCount" in server.properties is ignored by the Microsoft JDBC Driver, unless one sets the driver parameter "SelectMethod" to "cursor". To do this, append ";SelectMethod=cursor" (note the semicolon) to the JdbcUrl. The default is "SelectMethod=direct", and this causes the MS JDBC driver to clone connections internally. See http://support.microsoft.com/default.aspx?scid=kb;EN-US;313220 for more information.
            </p>
        </change>
        <change>
            <p>
                Conference, billboard, and chat should now work on case sensitive filesystems, for example on linux.
            </p>
        </change>
        <change>
            <p>
                Reindexing of documents is now scheduled every 24 hours from startup. Reindexing is done to a new directory, "imcms/WEB-INF/index.new", which replaces the current index "imcms/WEB-INF/index" when complete.
            </p>
        </change>
    </changes>
    <changes for="site developers">
        <change>
            <p>
                Moved the apisamples from "/apisamples/" to "/imcms/docs/apisamples/".
            </p>
        </change>
        <change>
            <p>
                DocumentService.saveChanges(Document) is now synchronized as a poor mans transaction to prevent database conflicts.
            </p>
        </change>
        <change>
            <p>
                Added method DocumentService.getCategoryType(int categoryTypeId)
            </p>
        </change>
        <change>
            <p>
                Added method DocumentService.createNewCategoryType(String name, int maxChoices)
            </p>
        </change>
        <change>
            <p>
                Added method DocumentService.createNewCategory(String name, String description, String imageUrl, CategoryType categoryType)
            </p>
        </change>
        <change>
            <p>
                Added method TemplateService.getAllTemplateGroups()
            </p>
        </change>
        <change>
            <p>
                Added accessors Template.getId() and TemplateGroup.getId().
            </p>
        </change>
        <change>
            <p>
                Added convenience method DocumentService.parseLuceneSearchQuery(String) which returns a SearchQuery parsed according to Lucene syntax, see http://jakarta.apache.org/lucene/docs/queryparsersyntax.html
            </p>
        </change>
    </changes>
    <changes for="developers">
        <change>
            <p>
                Cleaned up the file organization in the project.
            </p>
        </change>
        <change>
            <p>
                Renamed all the ant-targets using more consistent names.
            </p>
        </change>
        <change>
            <p>
                The API now has its own connection pool, so developers using the API can't accidentally starve the system of connections.
            </p>
        </change>
        <change>
            <p>
                Jakarta Velocity (http://jakarta.apache.org/velocity/) can now be used in admintemplates and JSP-pages.
            </p>
        </change>
        <change>
            <p>
                Searchable tokens in the index may now only consist of letters, digits, and underscores, instead of non-whitespace. This makes html index a little bit better, so that for example &lt;b>bold&lt;/b> is indexed as two words ("b" and "bold").
            </p>
        </change>
    </changes>
</changeset>
</changesets>
