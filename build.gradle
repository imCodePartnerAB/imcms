apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'idea'
apply plugin: 'war'
apply plugin: 'scala'

group = 'com.imcode.imcms'
version = '6.0.0-alpha108-SNAPSHOT'

description = """imCMS"""

sourceCompatibility = 1.8
targetCompatibility = 1.8
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}


sourceSets {
    main {
        scala {
            srcDirs = ['src/main/scala', 'src/main/java']
        }
        java {
            srcDirs = []
        }
    }
    test {
        scala {
            srcDirs = ['src/test/scala', 'src/test/java']
        }
        java {
            srcDirs = []
        }
    }
}


repositories {
    mavenCentral()
    maven { url "http://repo.imcode.com/maven2/" }
    maven { url "http://repo1.maven.org/maven2/" }
//    maven { url "http://mirrors.ibiblio.org/pub/mirrors/maven2" }
    maven { url "http://repository.codehaus.org" }
    maven { url "http://repository.jboss.org/maven2/" }
    maven { url "http://download.java.net/maven/2/" }
    maven { url "http://download.java.net/maven/1" }
    maven { url "http://repo.springsource.org/release" }
    maven { url "http://m2.neo4j.org/content/repositories/releases/" }
    maven { url "http://repo.spring.io/libs-snapshot" }
    maven { url "http://jcenter.bintray.com/" }
}
dependencies {
    compile group: 'org.restlet.jee', name: 'org.restlet.ext.servlet', version: '2.1.1'
    compile group: 'org.restlet.jee', name: 'org.restlet', version: '2.1.1'
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.13'
    compile group: 'log4j', name: 'log4j', version: '1.2.17'
    compile group: 'com.google.guava', name: 'guava', version: '19.0'
    compile(group: 'org.apache.tika', name: 'tika-parsers', version: '1.11') {
        exclude(module: 'commons-logging')
        exclude(module: 'asm')
    }
    compile group: 'joda-time', name: 'joda-time', version: '2.9.1'
    compile group: 'org.joda', name: 'joda-convert', version: '1.8.1'
    compile(group: 'commons-validator', name: 'commons-validator', version: '1.5.0') {
        exclude(module: 'commons-logging')
    }
    compile(group: 'commons-beanutils', name: 'commons-beanutils', version: '1.9.2') {
        exclude(module: 'commons-logging')
    }
    compile group: 'commons-codec', name: 'commons-codec', version: '1.10'
    compile(group: 'commons-betwixt', name: 'commons-betwixt', version: '0.8') {
        exclude(module: 'commons-logging')
    }
    compile group: 'org.apache.commons', name: 'commons-collections4', version: '4.1'
    compile group: 'net.sf.ehcache', name: 'ehcache-core', version: '2.6.9'
    compile group: 'net.sf.ehcache', name: 'ehcache-web', version: '2.0.4'
    compile group: 'commons-dbutils', name: 'commons-dbutils', version: '1.6'
    compile(group: 'org.apache.commons', name: 'commons-digester3', version: '3.2', classifier: 'with-deps') {
        exclude(module: 'commons-logging')
        exclude(module: 'cglib')
    }
    compile group: 'commons-fileupload', name: 'commons-fileupload', version: '1.3.1'
    compile group: 'commons-io', name: 'commons-io', version: '2.4'
    compile group: 'commons-lang', name: 'commons-lang', version: '2.6'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.4'
    compile group: 'commons-pool', name: 'commons-pool', version: '1.6'
    compile group: 'dom4j', name: 'dom4j', version: '1.6.1'
    compile group: 'org.apache.commons', name: 'commons-email', version: '1.4'
    compile group: 'gnu-inetlib', name: 'gnu-inetlib', version: '1.1'
    compile group: 'org.hibernate', name: 'hibernate-entitymanager', version: '4.3.11.Final'
    compile group: 'org.hibernate', name: 'hibernate-validator', version: '5.2.2.Final'
    compile group: 'com.fasterxml', name: 'classmate', version: '1.3.3'
    compile group: 'com.imcode.db', name: 'imcode-db', version: '0.3'
    compile(group: 'com.imcode.util', name: 'imcode-util', version: '2.0.4') {
        exclude(module: 'servlet-api')
    }
    compile group: 'com.imcode.ldap', name: 'imcode-ldap', version: '0.1'
    compile group: 'oro', name: 'oro', version: '2.0.8'
    compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'
    compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.38'
    compile group: 'org.apache.commons', name: 'commons-dbcp2', version: '2.1.1'
    compile(group: 'org.springframework', name: 'spring-core', version: '4.1.2.RELEASE') {
        exclude(module: 'commons-logging')
    }
    compile group: 'org.springframework', name: 'spring-webmvc', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-orm', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-aop', version: '4.1.2.RELEASE'
    compile(group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.7.1.RELEASE') {
        exclude(module: 'hibernate-jpa-2.1-api')
    }
    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'
    compile group: 'org.aspectj', name: 'aspectjweaver', version: '1.8.8'
    compile(group: 'org.apache.velocity', name: 'velocity', version: '1.7') {
        exclude(module: 'velocity-dep')
    }
    compile group: 'org.apache.sanselan', name: 'sanselan', version: '0.97-incubator'
    compile group: 'jakarta-regexp', name: 'jakarta-regexp', version: '1.4'
    compile group: 'org.scala-lang', name: 'scala-compiler', version: '2.11.7'
    compile group: 'org.scala-lang', name: 'scala-library', version: '2.11.7'
    compile group: 'org.scala-lang', name: 'scala-actors', version: '2.11.7'
    compile group: 'org.apache.solr', name: 'solr-core', version: '4.10.2'
    compile(group: 'org.apache.solr', name: 'solr-core', version: '4.10.2') {
        exclude(module: 'slf4j-jdk14')
        exclude(module: 'javax.servlet')
        exclude(module: 'javax.transaction')
        exclude(module: 'javax.annotation')
    }
    compile(group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.2') {
        exclude(module: 'commons-logging')
    }
    compile group: 'org.apache.httpcomponents', name: 'httpcore', version: '4.4.4'
    compile group: 'net.jcip', name: 'jcip-annotations', version: '1.0'
    compile group: 'org.apache.httpcomponents', name: 'httpmime', version: '4.3.6'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.8.1'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.8.1'
    compile group: 'javax.servlet', name: 'jstl', version: '1.2'
    compile group: 'org.apache.tomcat', name: 'tomcat-jsp-api', version: '7.0.57'
    compile group: 'org.apache.tomcat', name: 'tomcat-el-api', version: '7.0.57'
    compile group: 'org.apache.tomcat', name: 'tomcat-jasper-el', version: '7.0.57'
    compile group: 'xml-apis', name: 'xml-apis', version: '2.0.2'
    compile group: 'javax.validation', name: 'validation-api', version: '1.1.0.Final'
    compile group: 'javax.inject', name: 'javax.inject', version: '1'
    compile group: 'org.jsoup', name: 'jsoup', version: '1.8.3'
    compile group: 'com.jcabi', name: 'jcabi-w3c', version: '1.2'
    compile group: 'com.jcabi', name: 'jcabi-matchers', version: '1.3'
    compile group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.0.1'
    compile group: 'org.glassfish.jersey.core', name: 'jersey-common', version: '2.22.1'
    runtime group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.7.13'
    runtime group: 'org.slf4j', name: 'jcl-over-slf4j', version: '1.7.13'
    testCompile group: 'junit', name: 'junit', version: '4.12'
    testCompile group: 'org.mockito', name: 'mockito-all', version: '1.10.19'
    testCompile group: 'org.dbunit', name: 'dbunit', version: '2.5.1'
    testCompile group: 'org.springframework', name: 'spring-test', version: '4.1.2.RELEASE'
    testCompile(group: 'org.scalatest', name: 'scalatest_2.11', version: '2.2.6') {
        exclude(module: 'scala-library')
        exclude(module: 'scala-actors')
        exclude(module: 'scala-reflect')
    }
}

//uploadArchives {
//    repositories {
//        mavenDeployer {
//            repository(url: "file://localhost/tmp/myRepo/")
//        }
//    }
//}

//Basic property output
//task printProps {
//    doLast {
//        println gradlePropertiesProp
//        println projectBuildSourceEncoding
//    }
//}

//task merge{
//    doLast{
//        ant.importBuild '${project.basedir}/pom-ant.xml'
//    }
//}


